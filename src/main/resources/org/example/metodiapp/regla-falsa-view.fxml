<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="700.0" prefWidth="800.0" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.metodiapp.controllers.ReglaFalsaController">
    <top>
        <HBox alignment="CENTER_LEFT" prefHeight="50.0" spacing="10.0">
            <padding>
                <Insets left="10.0" right="10.0" />
            </padding>
            <children>
                <Label styleClass="h3" text="Método de la Regla Falsa" />
            </children>
        </HBox>
    </top>
    <center>
        <HBox spacing="10.0" BorderPane.alignment="CENTER">
            <padding>
                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
            </padding>
            <children>
                <VBox minWidth="300.0" spacing="10.0" HBox.hgrow="NEVER">
                    <children>
                        <HBox alignment="CENTER_LEFT" spacing="5.0">
                            <children>
                                <Label text="Función f(x):" />
                                <Button onAction="#mostrarAyuda" text="Ayuda" />
                            </children>
                        </HBox>
                        <TextField fx:id="funcionTextField" promptText="Ej: x^3 - x - 1" />
                        <HBox spacing="10.0">
                            <children>
                                <VBox HBox.hgrow="ALWAYS">
                                    <children>
                                        <Label text="Graficar X Mín:" />
                                        <TextField fx:id="xMinField" text="-10" />
                                    </children>
                                </VBox>
                                <VBox HBox.hgrow="ALWAYS">
                                    <children>
                                        <Label text="Graficar X Máx:" />
                                        <TextField fx:id="xMaxField" text="10" />
                                    </children>
                                </VBox>
                            </children>
                        </HBox>
                        <Button onAction="#graficar" text="Graficar Función" />
                        <Label text="--- Intervalo de Búsqueda ---" />
                        <HBox spacing="10.0">
                            <children>
                                <VBox HBox.hgrow="ALWAYS">
                                    <children>
                                        <Label text="Límite inferior (a):" />
                                        <TextField fx:id="aTextField" promptText="Ej: 1.0" />
                                    </children>
                                </VBox>
                                <VBox HBox.hgrow="ALWAYS">
                                    <children>
                                        <Label text="Límite superior (b):" />
                                        <TextField fx:id="bTextField" promptText="Ej: 2.0" />
                                    </children>
                                </VBox>
                            </children>
                        </HBox>
                        <Label text="Tolerancia (ε):" />
                        <TextField fx:id="toleranciaTextField" promptText="Ej: 0.0001" />
                        <Button fx:id="calcularButton" mnemonicParsing="false" onAction="#calcular" text="Calcular Raíz" styleClass="button-primary" />
                    </children>
                </VBox>
                <LineChart fx:id="funcionChart" title="Gráfico de la Función" HBox.hgrow="ALWAYS">
                    <xAxis>
                        <NumberAxis label="x" />
                    </xAxis>
                    <yAxis>
                        <NumberAxis label="f(x)" />
                    </yAxis>
                </LineChart>
            </children>
        </HBox>
    </center>
    <bottom>
        <VBox spacing="5.0">
            <children>
                <Label text="Resultados de Iteraciones:" />
                <TableView fx:id="tablaResultados" prefHeight="150.0">
                    <columns>
                        <TableColumn fx:id="colIteracion" prefWidth="50.0" text="Iter" />
                        <TableColumn fx:id="colA" prefWidth="90.0" text="a" />
                        <TableColumn fx:id="colB" prefWidth="90.0" text="b" />
                        <TableColumn fx:id="colFa" prefWidth="90.0" text="f(a)" />
                        <TableColumn fx:id="colFb" prefWidth="90.0" text="f(b)" />
                        <TableColumn fx:id="colXr" prefWidth="90.0" text="Xr" />
                        <TableColumn fx:id="colFxr" prefWidth="90.0" text="f(Xr)" />
                        <TableColumn fx:id="colError" prefWidth="90.0" text="Error" />
                    </columns>
                </TableView>
                <HBox alignment="CENTER_LEFT" prefHeight="40.0" spacing="10.0">
                     <padding>
                        <Insets bottom="5.0" left="10.0" right="10.0" top="5.0" />
                    </padding>
                    <children>
                        <Label fx:id="raizLabel" styleClass="h3" text="Raíz: " />
                        <Region HBox.hgrow="ALWAYS" />
                        <Label text="Hecho con ❤️ por MetodiApp" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="volverButton" mnemonicParsing="false" onAction="#volver" text="Volver" />
                    </children>
                </HBox>
            </children>
        </VBox>
    </bottom>
</BorderPane>
